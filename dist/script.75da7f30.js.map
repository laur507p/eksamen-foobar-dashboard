{"version":3,"sources":["script.js"],"names":["link","header","document","querySelector","queue","orders","shift","stockStatus","bestSellers","spotify","window","addEventListener","start","console","log","loadJSON","getData","setInterval","querySelectorAll","forEach","item","shiftFocus","url","callback","fetch","then","response","json","jsonData","data","showQueue","showOrders","serving","showStockStatus","storage","convertedOrders","convertOrder","order","oldOrder","newOrder","beer","push","queueData","textContent","length","orderData","servingData","template","container","innerHTML","klon","cloneNode","content","randomNum","Math","floor","random","id","classList","add","beerInOrder","createElement","appendChild","storageData","name","style","width","amount","remove"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"..","sourcesContent":["\"use strict\";\n\nconst link = \"https://foobar-eksamen.herokuapp.com/\";\n\n// components\nconst header = document.querySelector(\".comp1\");\nconst queue = document.querySelector(\".comp2\");\nconst orders = document.querySelector(\".comp3\");\nconst shift = document.querySelector(\".comp4\");\nconst stockStatus = document.querySelector(\".comp5\");\nconst bestSellers = document.querySelector(\".comp6\");\nconst spotify = document.querySelector(\".comp7\");\n\nwindow.addEventListener(\"load\", start);\n\nfunction start() {\n  console.log(\"start\");\n\n  // show data at load\n  loadJSON(link, getData);\n\n  // show data every 10 seconds\n  setInterval(() => {\n    loadJSON(link, getData);\n  }, 10000);\n\n  // add event listener to shift items\n  document.querySelectorAll(\".shift-item\").forEach((item) => {\n    item.addEventListener(\"click\", shiftFocus);\n  });\n}\n\n// loads data\nfunction loadJSON(url, callback) {\n  console.log(\"Update data\");\n  fetch(url)\n    .then((response) => response.json())\n    .then((jsonData) => {\n      callback(jsonData);\n    });\n}\n\n// delegateing function that sends data to other functions\nfunction getData(data) {\n  console.log(\"data is loaded\");\n  console.log(data);\n\n  // send data to components\n  showQueue(data.queue);\n\n  showOrders(data.queue, data.serving);\n\n  showStockStatus(data.storage);\n\n  // test\n  console.log(data.queue);\n\n  // orders that have been converted to the right format\n  const convertedOrders = convertOrder(data.queue);\n  console.log(\"CONVERTED\", convertedOrders);\n}\n\n// function that converts orders to the right format and returns array\nfunction convertOrder(data) {\n  let convertedOrders = [];\n\n  data.forEach((order) => {\n    let oldOrder = order.order;\n    let newOrder = {};\n    oldOrder.forEach((beer) => {\n      if (newOrder[beer]) {\n        newOrder[beer]++;\n      } else {\n        newOrder[beer] = 1;\n      }\n    });\n    convertedOrders.push(newOrder);\n  });\n  return convertedOrders;\n}\n\n// gets data from getData and displays how many are in the queue\nfunction showQueue(queueData) {\n  // show queue number\n  document.querySelector(\".queue-number\").textContent = queueData.length;\n}\n\n// gets data from getData and displays the orders\nfunction showOrders(orderData, servingData) {\n  //show orders data\n  const template = document.querySelector(\".order-template\");\n  let container = document.querySelector(\".orders-container\");\n\n  // clear container\n  container.innerHTML = \"\";\n\n  // orders that are being served\n  servingData.forEach((order) => {\n    let klon = template.cloneNode(true).content;\n    let randomNum = Math.floor(Math.random() * 10) + 1;\n    klon.querySelector(\".order-no\").textContent = randomNum;\n    klon.querySelector(\".beers\").innerHTML = \"\";\n    //klon.querySelector(\".order-container\").classList.add(\"fadeinout\");\n    klon.querySelector(\".order-no\").textContent = \"Order \" + order.id;\n    klon.querySelector(\".order-container\").classList.add(\"serving-order\");\n\n    order.order.forEach((beer) => {\n      let beerInOrder = document.createElement(\"li\");\n      beerInOrder.textContent = beer;\n      klon.querySelector(\".beers\").appendChild(beerInOrder);\n    });\n    container.appendChild(klon);\n  });\n\n  // orders in the queue\n  orderData.forEach((order) => {\n    let klon = template.cloneNode(true).content;\n    klon.querySelector(\".beers\").innerHTML = \"\";\n    klon.querySelector(\".order-no\").textContent = \"Order \" + order.id;\n    //klon.querySelector(\".order-container\").classList.add(\"fadeinout\");\n\n    order.order.forEach((beer) => {\n      let beerInOrder = document.createElement(\"li\");\n      beerInOrder.textContent = beer;\n      klon.querySelector(\".beers\").appendChild(beerInOrder);\n    });\n    container.appendChild(klon);\n  });\n}\n\nfunction showStockStatus(storageData) {\n  // console.log(storageData);\n\n  const template = document.querySelector(\".storage-template\");\n  let container = document.querySelector(\".storage-container\");\n\n  // clear container\n  container.innerHTML = \"\";\n\n  // orders in the queue\n  storageData.forEach((item) => {\n    let klon = template.cloneNode(true).content;\n    klon.querySelector(\".storage-name\").textContent = item.name;\n\n    klon.querySelector(\".storage-meter\").style.width = item.amount + \"0%\";\n\n    if (item.amount === 1) {\n      klon.querySelector(\".storage-meter\").textContent = item.amount;\n    } else {\n      klon.querySelector(\".storage-meter\").textContent = item.amount + \" kegs\";\n    }\n\n    container.appendChild(klon);\n  });\n}\n\nfunction shiftFocus() {\n  console.log(\"shiftfocus\");\n  document.querySelectorAll(\".shift-item\").forEach((item) => {\n    item.classList.remove(\"selected\");\n  });\n\n  this.classList.add(\"selected\");\n}\n"]}